/*
 valtech.video.js
 (c) Copyright 2015 valtech.dk
 Version: 0.0.12 (30-01-2015)
*/
var VT=VT?VT:{};
VT.video={addScript:function(a){var e=document.createElement("script"),c=document.getElementsByTagName("script")[0];e.src=a;c.parentNode.insertBefore(e,c)},cleanPrefix:function(a,e){return a.slice(e)},hashChange:function(){var a,e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),c=document.getElementById(window.location.hash.slice(1)),d,g,h=c&&c.getAttribute("data-video-id"),f,b;(a=document.querySelectorAll("a.selected")[0])&&a.classList.remove("selected");document.querySelectorAll('[href="#'+window.location.hash.slice(1)+
'"]')[0].classList.add("selected");VT.video.list.playing.videoid&&(VT.video.list[VT.video.list.playing.provider].videos[VT.video.list.playing.videoid][VT.video.list[VT.video.list.playing.provider].pauseFunc](),VT.video.list.playing.videoid="");if(h)try{b=c.getAttribute("data-video-provider");f=VT.video.list[b].prefix;g=VT.video.list[b].playFunc;h=f+h;d=VT.video.list[b].videos[h];if(!e&&d&&!VT.video.isEmpty(d)&&g)d[g]();VT.video.list.playing.provider=b;VT.video.list.playing.videoid=h}catch(k){console.log("ERROR: Video could not be loaded. "+
k)}},init:function(){var a=document.querySelectorAll("[data-video-provider]"),e=document.referrer.split("/")[2]===window.location.hostname,c,d,g,h,f,b;for(d=a.length;d--;)b=a[d].getAttribute("data-video-provider"),!VT.video.list[b].loaded&&VT.video.list[b].script&&(VT.video.addScript(VT.video.list[b].script),VT.video.list[b].loaded=!0),f=document.createElement(VT.video.list[b].embedTag),g=VT.video.list[b].prefix,c=a[d].getAttribute("data-video-id"),f.id=g+c,"iframe"===VT.video.list[b].embedTag&&(f.src=
VT.video.list[b].embedPrefix+c+VT.video.list[b].embedSuffix),f.style.width="100%",a[d].appendChild(f),c=Boolean(a[d].getAttribute("data-video-widescreen")),g=f.offsetWidth,f.style.height=(c?g/16*9:g/4*3)+"px",VT.video.list[b].videos[f.id]={};VT.video.loadVimeo();h=setInterval(function(){"object"==typeof window.YKU&&(VT.video.loadYouKu(),clearInterval(h))},500);e&&1<window.location.hash.length&&VT.video.hashChange()},isEmpty:function(a){return 0===Object.keys(a).length},loadVimeo:function(){for(var a in VT.video.list.vimeo.videos)VT.video.list.vimeo.videos.hasOwnProperty(a)&&
(VT.video.list.vimeo.videos[a].playVimeo=function(){VT.video.postVimeoVal(document.getElementById(a.toString()),"play")},VT.video.list.vimeo.videos[a].pauseVimeo=function(){VT.video.postVimeoVal(document.getElementById(a.toString()),"pause")})},loadYouKu:function(){for(var a in VT.video.list.youku.videos)VT.video.list.youku.videos.hasOwnProperty(a)&&(VT.video.list.youku.videos[a]=new YKU.Player(a,{client_id:VT.video.list.youku.client,vid:VT.video.cleanPrefix(a,2)}))},loadYouTube:function(){for(var a in VT.video.list.youtube.videos)VT.video.list.youtube.videos.hasOwnProperty(a)&&
(VT.video.list.youtube.videos[a]=new YT.Player(a,{videoId:VT.video.cleanPrefix(a,2)}))},postVimeoVal:function(a,e,c){e={method:e};var d=a.src.split("?")[0];c&&(e.value=c);void 0!==d&&a.contentWindow.postMessage(JSON.stringify(e),d)},list:{playing:{provider:"",videoid:""},vimeo:{embedPrefix:"http://player.vimeo.com/video/",embedSuffix:"?api=1",embedTag:"iframe",playFunc:"playVimeo",pauseFunc:"pauseVimeo",prefix:"vm",videos:{}},youku:{client:"1e2ec16ba3ad918c",embedTag:"div",loaded:!1,playFunc:"playVideo",
pauseFunc:"pauseVideo",prefix:"yk",script:"//player.youku.com/jsapi",videos:{}},youtube:{embedTag:"div",loaded:!1,playFunc:"playVideo",pauseFunc:"pauseVideo",prefix:"yt",script:"//www.youtube.com/iframe_api",videos:{}}}};function onYouTubeIframeAPIReady(){VT.video.loadYouTube()}window.onhashchange=function(){VT.video.hashChange()};VT.video.init();